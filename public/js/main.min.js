var no_paste={};!function(){"use strict";no_paste.ContentModel=Backbone.Model.extend({urlRoot:"/api/content",validate:function(a){var b=[];return a.body||b.push({attr:"body",msg:"body is required."}),b.length>0?b:void 0}}),no_paste.ContentView=Backbone.View.extend({events:{},initialize:function(){_.bindAll(this,"render")},show:function(a){var b=new no_paste.ContentModel({id:a});b.on("change",this.render),b.fetch()},render:function(a){var b=_.template($("#tmpl-show").html());this.$el.html(b(a.attributes)),prettyPrint()}}),no_paste.RegistrationView=Backbone.View.extend({events:{"click [data-submit=register]":"submit"},initialize:function(){_.bindAll(this,"set_error","show")},render:function(){var a=_.template($("#tmpl-register").html());this.$el.html(a({}))},submit:function(a){a.preventDefault();var b=new no_paste.ContentModel({subject:$("#input-subject").val()||"",body:$("#input-body").val()});b.on("invalid",this.set_error),b.on("change",this.show),b.save({},{error:function(){alert("エラーが発生しました")}})},show:function(a){location.hash="#"+a.get("id")},set_error:function(a,b){_(b).each(function(a){var b=$("#input-"+a.attr),c=b.parents(".control-group");c.hasClass("error")||(b.after(_.template('<p class="help-block"><%= msg %></p>',a)),c.addClass("error"))})}}),no_paste.Router=Backbone.Router.extend({routes:{"":"register",register:"register",":id":"show"},initialize:function(){this.register_view=new no_paste.RegistrationView({el:"#page-content"}),this.content_view=new no_paste.ContentView({el:"#page-content"})},register:function(){this.register_view.render()},show:function(a){this.content_view.show(a)}}),$(function(){new no_paste.Router,Backbone.history.start({})})}();